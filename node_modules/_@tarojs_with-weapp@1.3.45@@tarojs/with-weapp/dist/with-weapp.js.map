{"version":3,"file":"with-weapp.js","sources":["../src/lifecycle.ts","../src/utils.ts","../src/diff.js","../src/clone.js","../src/index.ts"],"sourcesContent":["interface LifecycleMap {\n  [key: string]: string[]\n}\n\nexport enum TaroLifeCycles {\n  WillMount = 'componentWillMount',\n  DidMount = 'componentDidMount',\n  DidShow = 'componentDidShow',\n  DidHide = 'componentDidHide',\n  WillUnmount = 'componentWillUnmount'\n}\n\nexport const lifecycleMap: LifecycleMap = {\n  [TaroLifeCycles.WillMount]: ['created', 'onLoad', 'onLanuch'],\n  [TaroLifeCycles.DidMount]: ['onReady', 'ready', 'attached'],\n  [TaroLifeCycles.DidShow]: ['onShow'],\n  [TaroLifeCycles.DidHide]: ['onHide'],\n  [TaroLifeCycles.WillUnmount]: ['detached', 'onUnload']\n}\n\nexport const lifecycles = new Set<string>()\n\nfor (const key in lifecycleMap) {\n  const lifecycle = lifecycleMap[key]\n  lifecycle.forEach(l => lifecycles.add(l))\n}\n","/**\n * Simple bind, faster than native\n */\nexport function bind (fn /*: Function */, ctx /*: Object */) /*: Function */ {\n  if (!fn) return false\n\n  function boundFn (a) {\n    const l /*: number */ = arguments.length\n    return l ? (l > 1 ? fn.apply(ctx, arguments) : fn.call(ctx, a)) : fn.call(ctx)\n  }\n\n  // record original fn length\n  boundFn._length = fn.length\n  return boundFn\n}\n\nexport function isEqual (obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2)\n}\n\nexport function noop (..._: unknown[]) {\n  //\n}\n\nconst sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n}\n\nexport function proxy (target, sourceKey: string, key: string) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  }\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n","const ARRAYTYPE = '[object Array]'\nconst OBJECTTYPE = '[object Object]'\nconst FUNCTIONTYPE = '[object Function]'\n\nexport function diff (current, pre) {\n  const result = {}\n  syncKeys(current, pre)\n  _diff(current, pre, '', result)\n  return result\n}\n\nfunction syncKeys (current, pre) {\n  if (current === pre) return\n  const rootCurrentType = type(current)\n  const rootPreType = type(pre)\n  if (rootCurrentType == OBJECTTYPE && rootPreType == OBJECTTYPE) {\n    // if(Object.keys(current).length >= Object.keys(pre).length){\n    for (let key in pre) {\n      const currentValue = current[key]\n      if (currentValue === undefined) {\n        current[key] = null\n      } else {\n        syncKeys(currentValue, pre[key])\n      }\n    }\n    // }\n  } else if (rootCurrentType == ARRAYTYPE && rootPreType == ARRAYTYPE) {\n    if (current.length >= pre.length) {\n      pre.forEach((item, index) => {\n        syncKeys(current[index], item)\n      })\n    }\n  }\n}\n\nfunction _diff (current, pre, path, result) {\n  if (current === pre) return\n  const rootCurrentType = type(current)\n  const rootPreType = type(pre)\n  if (rootCurrentType == OBJECTTYPE) {\n    if (rootPreType != OBJECTTYPE || Object.keys(current).length < Object.keys(pre).length) {\n      setResult(result, path, current)\n    } else {\n      for (let key in current) {\n        const currentValue = current[key]\n        const preValue = pre[key]\n        const currentType = type(currentValue)\n        const preType = type(preValue)\n        if (currentType != ARRAYTYPE && currentType != OBJECTTYPE) {\n          if (currentValue != pre[key]) {\n            setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n          }\n        } else if (currentType == ARRAYTYPE) {\n          if (preType != ARRAYTYPE) {\n            setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n          } else {\n            if (currentValue.length < preValue.length) {\n              setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n            } else {\n              currentValue.forEach((item, index) => {\n                _diff(item, preValue[index], (path == '' ? '' : path + '.') + key + '[' + index + ']', result)\n              })\n            }\n          }\n        } else if (currentType == OBJECTTYPE) {\n          if (preType != OBJECTTYPE || Object.keys(currentValue).length < Object.keys(preValue).length) {\n            setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n          } else {\n            for (let subKey in currentValue) {\n              _diff(currentValue[subKey], preValue[subKey], (path == '' ? '' : path + '.') + key + '.' + subKey, result)\n            }\n          }\n        }\n      }\n    }\n  } else if (rootCurrentType == ARRAYTYPE) {\n    if (rootPreType != ARRAYTYPE) {\n      setResult(result, path, current)\n    } else {\n      if (current.length < pre.length) {\n        setResult(result, path, current)\n      } else {\n        current.forEach((item, index) => {\n          _diff(item, pre[index], path + '[' + index + ']', result)\n        })\n      }\n    }\n  } else {\n    setResult(result, path, current)\n  }\n}\n\nfunction setResult (result, k, v) {\n  if (type(v) != FUNCTIONTYPE) {\n    result[k] = v\n  }\n}\n\nfunction type (obj) {\n  return Object.prototype.toString.call(obj)\n}\n","let json = JSON\n\nexport const clone = (obj) => json.parse(stringify(obj))\n\nfunction stringify (obj, opts) {\n  if (!opts) opts = {}\n  if (typeof opts === 'function') opts = { cmp: opts }\n  let space = opts.space || ''\n  if (typeof space === 'number') space = Array(space + 1).join(' ')\n  let cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false\n  let replacer = opts.replacer || function (key, value) { return value }\n\n  let cmp = opts.cmp && (function (f) {\n    return function (node) {\n      return function (a, b) {\n        let aobj = { key: a, value: node[a] }\n        let bobj = { key: b, value: node[b] }\n        return f(aobj, bobj)\n      }\n    }\n  })(opts.cmp)\n\n  let seen = []\n  return (function stringify (parent, key, node, level) {\n    let indent = space ? ('\\n' + new Array(level + 1).join(space)) : ''\n    let colonSeparator = space ? ': ' : ':'\n\n    if (node && node.toJSON && typeof node.toJSON === 'function') {\n      node = node.toJSON()\n    }\n\n    node = replacer.call(parent, key, node)\n\n    if (node === undefined) {\n      return\n    }\n    if (typeof node !== 'object' || node === null) {\n      return json.stringify(node)\n    }\n    if (isArray(node)) {\n      let out = []\n      for (let i = 0; i < node.length; i++) {\n        let item = stringify(node, i, node[i], level + 1) || json.stringify(null)\n        out.push(indent + space + item)\n      }\n      return '[' + out.join(',') + indent + ']'\n    } else {\n      if (seen.indexOf(node) !== -1) {\n        if (cycles) return json.stringify('__cycle__')\n        throw new TypeError('Converting circular structure to JSON')\n      } else seen.push(node)\n\n      let keys = objectKeys(node).sort(cmp && cmp(node))\n      let out = []\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i]\n        let value = stringify(node, key, node[key], level + 1)\n\n        if (!value) continue\n\n        let keyValue = json.stringify(key) +\n                  colonSeparator +\n                  value\n\n        out.push(indent + space + keyValue)\n      }\n      seen.splice(seen.indexOf(node), 1)\n      return '{' + out.join(',') + indent + '}'\n    }\n  })({ '': obj }, '', obj, 0)\n};\n\nlet isArray = Array.isArray || function (x) {\n  return {}.toString.call(x) === '[object Array]'\n}\n\nlet objectKeys = Object.keys || function (obj) {\n  let has = Object.prototype.hasOwnProperty || function () { return true }\n  let keys = []\n  for (let key in obj) {\n    if (has.call(obj, key)) keys.push(key)\n  }\n  return keys\n}\n","import { Component, ComponentLifecycle, internal_safe_set as safeSet, internal_safe_get as safeGet, setIsUsingDiff } from '@tarojs/taro'\nimport { lifecycles, lifecycleMap, TaroLifeCycles } from './lifecycle'\nimport { bind, proxy, isEqual } from './utils'\nimport { diff } from './diff'\nimport { clone } from './clone'\n\ntype Observer = (newProps, oldProps, changePath: string) => void\n\ninterface ObserverProperties {\n  name: string,\n  observer: string | Observer\n}\n\ninterface ComponentClass<P = {}, S = {}> extends ComponentLifecycle<P, S> {\n  new (props: P): Component<P, S>\n  externalClasses: Record<string, unknown>\n  defaultProps?: Partial<P>\n  _observeProps?: ObserverProperties[]\n  observers?: Record<string, Function>\n}\n\ninterface WxOptions {\n  methods?: {\n    [key: string]: Function;\n  }\n  properties?: Record<string, Record<string, unknown> | Function>\n  props?: Record<string, unknown>\n  data?: Record<string, unknown>,\n  observers?: Record<string, Function>\n}\n\nfunction defineGetter (component: Component, key: string, getter: string) {\n  Object.defineProperty(component, key, {\n    enumerable: true,\n    configurable: true,\n    get: () => {\n      if (getter === 'props') {\n        return component.props\n      }\n      return {\n        ...component.state,\n        ...component.props\n      }\n    }\n  })\n}\n\nfunction isFunction (o): o is Function {\n  return typeof o === 'function'\n}\n\nexport default function withWeapp (weappConf: WxOptions) {\n\n  return (ConnectComponent: ComponentClass) => {\n    class BaseComponent<P = {}, S = {}> extends ConnectComponent {\n      private _observeProps: ObserverProperties[] = []\n\n      // mixins 可以多次调用生命周期\n      private willMounts: Function[] = []\n\n      private didMounts: Function[] = []\n\n      private didHides: Function[] = []\n\n      private didShows: Function[] = []\n\n      private willUnmounts: Function[] = []\n\n      public observers?: Record<string, Function>\n\n      constructor (props) {\n        super(props)\n        this.init(weappConf)\n        defineGetter(this, 'data', 'state')\n        defineGetter(this, 'properties', 'props')\n      }\n\n      private initProps (props: Object) {\n        for (const propKey in props) {\n          if (props.hasOwnProperty(propKey)) {\n            const propValue = props[propKey]\n            if (!isFunction(propValue)) {\n              if (propValue.observer) {\n                this._observeProps.push({\n                  name: propKey,\n                  observer: propValue.observer\n                })\n              }\n            }\n            proxy(this, 'props', propKey)\n          }\n        }\n      }\n\n      private init (options: WxOptions) {\n        for (const confKey in options) {\n          const confValue = options[confKey]\n          switch (confKey) {\n            case 'externalClasses':\n              break\n            case 'data':\n              this.state = confValue\n              const keys = Object.keys(this.state)\n              let i = keys.length\n              while (i--) {\n                const key = keys[i]\n                proxy(this, `state`, key)\n              }\n              break\n            case 'properties':\n              this.initProps(confValue)\n              break\n            case 'methods':\n              for (const key in confValue) {\n                const method = confValue[key]\n                this[key] = bind(method, this)\n              }\n              break\n            case 'behaviors':\n              // this.initMixins(confValue, options);\n              break\n            case 'lifetimes':\n              for (const key in confValue) {\n                const lifecycle = confValue[key]\n                this.initLifeCycles(key, lifecycle)\n              }\n              break\n            default:\n              if (lifecycles.has(confKey)) {\n                const lifecycle = options[confKey]\n                this.initLifeCycles(confKey, lifecycle)\n              } else if (isFunction(confValue)) {\n                this[confKey] = bind(confValue, this)\n              } else {\n                this[confKey] = confValue\n              }\n              break\n          }\n        }\n      }\n\n      private initLifeCycles (lifecycleName: string, lifecycle: Function) {\n        for (const lifecycleKey in lifecycleMap) {\n          const cycleNames = lifecycleMap[lifecycleKey]\n          if (cycleNames.indexOf(lifecycleName) !== -1) {\n            switch (lifecycleKey) {\n              case TaroLifeCycles.DidHide:\n                this.didHides.push(lifecycle)\n                break\n              case TaroLifeCycles.DidMount:\n                this.didMounts.push(lifecycle)\n                break\n              case TaroLifeCycles.DidShow:\n                this.didShows.push(lifecycle)\n                break\n              case TaroLifeCycles.WillMount:\n                this.willMounts.push(lifecycle)\n                break\n              case TaroLifeCycles.WillUnmount:\n                this.willUnmounts.push(lifecycle)\n                break\n              default:\n                break\n            }\n          }\n        }\n\n        // mixins 不会覆盖已经设置的生命周期，加入到 this 是为了形如 this.created() 的调用\n        if (!isFunction(this[lifecycleName])) {\n          this[lifecycleName] = lifecycle\n        }\n      }\n\n      private safeExecute = (func?: Function, ...args: unknown[]) => {\n        if (isFunction(func)) func.apply(this, args)\n      }\n\n      private executeLifeCycles (funcs: Function[], ...args: unknown[]) {\n        for (let i = 0; i < funcs.length; i++) {\n          const func = funcs[i]\n          this.safeExecute(func, ...args)\n        }\n      }\n\n      public selectComponent = (...args: unknown[]) => {\n        if (this.$scope && this.$scope.selectComponent) {\n          this.$scope.selectComponent(...args)\n        } else {\n          // tslint:disable-next-line: no-console\n          console.error(`this.$scope 下没有 selectComponent 方法`)\n        }\n      }\n\n      public getRelationNodes = (...args: unknown[]) => {\n        if (this.$scope && this.$scope.getRelationNodes) {\n          this.$scope.getRelationNodes(...args)\n        } else {\n          // tslint:disable-next-line: no-console\n          console.error(`this.$scope 下没有 getRelationNodes 方法`)\n        }\n      }\n\n      setData = (obj: S, callback?: () => void) => {\n        let oldState\n        if (this.observers && Object.keys(Object.keys(this.observers))) {\n          oldState = clone(this.state)\n        }\n        Object.keys(obj).forEach(key => {\n          safeSet(this.state, key, obj[key])\n        })\n        setIsUsingDiff(false)\n        this.setState(this.state, () => {\n          setIsUsingDiff(true)\n          this.triggerObservers(this.state, oldState)\n          if (callback) {\n            callback.call(this)\n          }\n        })\n      }\n\n      private triggerObservers (current, prev) {\n        const observers = this.observers\n        if (observers == null) {\n          return\n        }\n\n        if (Object.keys(observers).length === 0) {\n          return\n        }\n\n        const result = diff(current, prev)\n        const resultKeys = Object.keys(result)\n        if (resultKeys.length === 0) {\n          return\n        }\n\n        for (const observerKey in observers) {\n          const keys = observerKey.split(',').map(k => k.trim())\n          const args: any = []\n          for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            for (let j = 0; j < resultKeys.length; j++) {\n              const resultKey = resultKeys[j]\n              if (\n                resultKey.startsWith(key) ||\n                (key.startsWith(resultKey) && key.endsWith(']'))\n              ) {\n                args.push(safeGet(current, key))\n              }\n            }\n          }\n          if (args.length) {\n            observers[observerKey].apply(this, args)\n          }\n        }\n      }\n\n      public triggerEvent = (eventName: string, ...args: unknown[]) => {\n        const func = this.props[`on${eventName[0].slice(0, 1).toUpperCase()}${eventName.slice(1)}`]\n        if (isFunction(func)) {\n          func.apply(this, args.map(a => ({ detail: a })))\n        }\n      }\n\n      public componentWillMount () {\n        this._observeProps.forEach(({ name: key, observer }) => {\n          const prop = this.props[key]\n          if (typeof observer === 'string') {\n            const ob = this[observer]\n            if (isFunction(ob)) {\n              ob.call(this, prop, prop, key)\n            }\n          } else if (isFunction(observer)) {\n            observer.call(this, prop, prop, key)\n          }\n        })\n        this.safeExecute(super.componentWillMount)\n        this.executeLifeCycles(this.willMounts, this.$router.params || {})\n      }\n\n      public componentDidMount () {\n        this.safeExecute(super.componentDidMount)\n        this.executeLifeCycles(this.didMounts)\n      }\n\n      public componentWillUnmount () {\n        this.safeExecute(super.componentWillUnmount)\n        this.executeLifeCycles(this.willUnmounts)\n      }\n\n      public componentDidHide () {\n        this.safeExecute(super.componentDidHide)\n        this.executeLifeCycles(this.didHides)\n      }\n\n      public componentDidShow () {\n        this.safeExecute(super.componentDidShow)\n        this.executeLifeCycles(this.didShows, this.$router.params || {})\n      }\n\n      public componentWillReceiveProps (nextProps: P) {\n        this.triggerObservers(nextProps, this.props)\n        this._observeProps.forEach(({ name: key, observer }) => {\n          const prop = this.props[key]\n          const nextProp = nextProps[key]\n          // 小程序是深比较不同之后才 trigger observer\n          if (!isEqual(prop, nextProp)) {\n            if (typeof observer === 'string') {\n              const ob = this[observer]\n              if (isFunction(ob)) {\n                ob.call(this, nextProp, prop, key)\n              }\n            } else if (isFunction(observer)) {\n              observer.call(this, nextProp, prop, key)\n            }\n          }\n        })\n        this.safeExecute(super.componentWillReceiveProps)\n      }\n    }\n\n    const props = weappConf['properties']\n\n    if (props) {\n      for (const propKey in props) {\n        const propValue = props[propKey]\n        if (propValue != null && !isFunction(propValue)) {\n          if (propValue.value !== undefined) { // 如果是 null 也赋值到 defaultProps\n            BaseComponent.defaultProps = {\n              [propKey]: propValue.value,\n              ...BaseComponent.defaultProps\n            }\n          }\n        }\n      }\n    }\n\n    const staticOptions = ['externalClasses', 'relations', 'options']\n\n    staticOptions.forEach(option => {\n      const value = weappConf[option]\n      if (value != null) {\n        BaseComponent[option] = value\n      }\n    })\n\n    return BaseComponent\n  }\n}\n"],"names":["const","let","out","i","key","super","this","safeSet","setIsUsingDiff","lifecycle","safeGet"],"mappings":"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"}