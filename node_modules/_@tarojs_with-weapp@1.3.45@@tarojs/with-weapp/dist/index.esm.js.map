{"version":3,"file":"index.esm.js","sources":["../src/lifecycle.ts","../src/utils.ts","../src/diff.js","../src/clone.js","../src/index.ts"],"sourcesContent":["interface LifecycleMap {\n  [key: string]: string[]\n}\n\nexport enum TaroLifeCycles {\n  WillMount = 'componentWillMount',\n  DidMount = 'componentDidMount',\n  DidShow = 'componentDidShow',\n  DidHide = 'componentDidHide',\n  WillUnmount = 'componentWillUnmount'\n}\n\nexport const lifecycleMap: LifecycleMap = {\n  [TaroLifeCycles.WillMount]: ['created', 'onLoad', 'onLanuch'],\n  [TaroLifeCycles.DidMount]: ['onReady', 'ready', 'attached'],\n  [TaroLifeCycles.DidShow]: ['onShow'],\n  [TaroLifeCycles.DidHide]: ['onHide'],\n  [TaroLifeCycles.WillUnmount]: ['detached', 'onUnload']\n}\n\nexport const lifecycles = new Set<string>()\n\nfor (const key in lifecycleMap) {\n  const lifecycle = lifecycleMap[key]\n  lifecycle.forEach(l => lifecycles.add(l))\n}\n","/**\n * Simple bind, faster than native\n */\nexport function bind (fn /*: Function */, ctx /*: Object */) /*: Function */ {\n  if (!fn) return false\n\n  function boundFn (a) {\n    const l /*: number */ = arguments.length\n    return l ? (l > 1 ? fn.apply(ctx, arguments) : fn.call(ctx, a)) : fn.call(ctx)\n  }\n\n  // record original fn length\n  boundFn._length = fn.length\n  return boundFn\n}\n\nexport function isEqual (obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2)\n}\n\nexport function noop (..._: unknown[]) {\n  //\n}\n\nconst sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n}\n\nexport function proxy (target, sourceKey: string, key: string) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  }\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n","const ARRAYTYPE = '[object Array]'\nconst OBJECTTYPE = '[object Object]'\nconst FUNCTIONTYPE = '[object Function]'\n\nexport function diff (current, pre) {\n  const result = {}\n  syncKeys(current, pre)\n  _diff(current, pre, '', result)\n  return result\n}\n\nfunction syncKeys (current, pre) {\n  if (current === pre) return\n  const rootCurrentType = type(current)\n  const rootPreType = type(pre)\n  if (rootCurrentType == OBJECTTYPE && rootPreType == OBJECTTYPE) {\n    // if(Object.keys(current).length >= Object.keys(pre).length){\n    for (let key in pre) {\n      const currentValue = current[key]\n      if (currentValue === undefined) {\n        current[key] = null\n      } else {\n        syncKeys(currentValue, pre[key])\n      }\n    }\n    // }\n  } else if (rootCurrentType == ARRAYTYPE && rootPreType == ARRAYTYPE) {\n    if (current.length >= pre.length) {\n      pre.forEach((item, index) => {\n        syncKeys(current[index], item)\n      })\n    }\n  }\n}\n\nfunction _diff (current, pre, path, result) {\n  if (current === pre) return\n  const rootCurrentType = type(current)\n  const rootPreType = type(pre)\n  if (rootCurrentType == OBJECTTYPE) {\n    if (rootPreType != OBJECTTYPE || Object.keys(current).length < Object.keys(pre).length) {\n      setResult(result, path, current)\n    } else {\n      for (let key in current) {\n        const currentValue = current[key]\n        const preValue = pre[key]\n        const currentType = type(currentValue)\n        const preType = type(preValue)\n        if (currentType != ARRAYTYPE && currentType != OBJECTTYPE) {\n          if (currentValue != pre[key]) {\n            setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n          }\n        } else if (currentType == ARRAYTYPE) {\n          if (preType != ARRAYTYPE) {\n            setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n          } else {\n            if (currentValue.length < preValue.length) {\n              setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n            } else {\n              currentValue.forEach((item, index) => {\n                _diff(item, preValue[index], (path == '' ? '' : path + '.') + key + '[' + index + ']', result)\n              })\n            }\n          }\n        } else if (currentType == OBJECTTYPE) {\n          if (preType != OBJECTTYPE || Object.keys(currentValue).length < Object.keys(preValue).length) {\n            setResult(result, (path == '' ? '' : path + '.') + key, currentValue)\n          } else {\n            for (let subKey in currentValue) {\n              _diff(currentValue[subKey], preValue[subKey], (path == '' ? '' : path + '.') + key + '.' + subKey, result)\n            }\n          }\n        }\n      }\n    }\n  } else if (rootCurrentType == ARRAYTYPE) {\n    if (rootPreType != ARRAYTYPE) {\n      setResult(result, path, current)\n    } else {\n      if (current.length < pre.length) {\n        setResult(result, path, current)\n      } else {\n        current.forEach((item, index) => {\n          _diff(item, pre[index], path + '[' + index + ']', result)\n        })\n      }\n    }\n  } else {\n    setResult(result, path, current)\n  }\n}\n\nfunction setResult (result, k, v) {\n  if (type(v) != FUNCTIONTYPE) {\n    result[k] = v\n  }\n}\n\nfunction type (obj) {\n  return Object.prototype.toString.call(obj)\n}\n","let json = JSON\n\nexport const clone = (obj) => json.parse(stringify(obj))\n\nfunction stringify (obj, opts) {\n  if (!opts) opts = {}\n  if (typeof opts === 'function') opts = { cmp: opts }\n  let space = opts.space || ''\n  if (typeof space === 'number') space = Array(space + 1).join(' ')\n  let cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false\n  let replacer = opts.replacer || function (key, value) { return value }\n\n  let cmp = opts.cmp && (function (f) {\n    return function (node) {\n      return function (a, b) {\n        let aobj = { key: a, value: node[a] }\n        let bobj = { key: b, value: node[b] }\n        return f(aobj, bobj)\n      }\n    }\n  })(opts.cmp)\n\n  let seen = []\n  return (function stringify (parent, key, node, level) {\n    let indent = space ? ('\\n' + new Array(level + 1).join(space)) : ''\n    let colonSeparator = space ? ': ' : ':'\n\n    if (node && node.toJSON && typeof node.toJSON === 'function') {\n      node = node.toJSON()\n    }\n\n    node = replacer.call(parent, key, node)\n\n    if (node === undefined) {\n      return\n    }\n    if (typeof node !== 'object' || node === null) {\n      return json.stringify(node)\n    }\n    if (isArray(node)) {\n      let out = []\n      for (let i = 0; i < node.length; i++) {\n        let item = stringify(node, i, node[i], level + 1) || json.stringify(null)\n        out.push(indent + space + item)\n      }\n      return '[' + out.join(',') + indent + ']'\n    } else {\n      if (seen.indexOf(node) !== -1) {\n        if (cycles) return json.stringify('__cycle__')\n        throw new TypeError('Converting circular structure to JSON')\n      } else seen.push(node)\n\n      let keys = objectKeys(node).sort(cmp && cmp(node))\n      let out = []\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i]\n        let value = stringify(node, key, node[key], level + 1)\n\n        if (!value) continue\n\n        let keyValue = json.stringify(key) +\n                  colonSeparator +\n                  value\n\n        out.push(indent + space + keyValue)\n      }\n      seen.splice(seen.indexOf(node), 1)\n      return '{' + out.join(',') + indent + '}'\n    }\n  })({ '': obj }, '', obj, 0)\n};\n\nlet isArray = Array.isArray || function (x) {\n  return {}.toString.call(x) === '[object Array]'\n}\n\nlet objectKeys = Object.keys || function (obj) {\n  let has = Object.prototype.hasOwnProperty || function () { return true }\n  let keys = []\n  for (let key in obj) {\n    if (has.call(obj, key)) keys.push(key)\n  }\n  return keys\n}\n","import { Component, ComponentLifecycle, internal_safe_set as safeSet, internal_safe_get as safeGet, setIsUsingDiff } from '@tarojs/taro'\nimport { lifecycles, lifecycleMap, TaroLifeCycles } from './lifecycle'\nimport { bind, proxy, isEqual } from './utils'\nimport { diff } from './diff'\nimport { clone } from './clone'\n\ntype Observer = (newProps, oldProps, changePath: string) => void\n\ninterface ObserverProperties {\n  name: string,\n  observer: string | Observer\n}\n\ninterface ComponentClass<P = {}, S = {}> extends ComponentLifecycle<P, S> {\n  new (props: P): Component<P, S>\n  externalClasses: Record<string, unknown>\n  defaultProps?: Partial<P>\n  _observeProps?: ObserverProperties[]\n  observers?: Record<string, Function>\n}\n\ninterface WxOptions {\n  methods?: {\n    [key: string]: Function;\n  }\n  properties?: Record<string, Record<string, unknown> | Function>\n  props?: Record<string, unknown>\n  data?: Record<string, unknown>,\n  observers?: Record<string, Function>\n}\n\nfunction defineGetter (component: Component, key: string, getter: string) {\n  Object.defineProperty(component, key, {\n    enumerable: true,\n    configurable: true,\n    get: () => {\n      if (getter === 'props') {\n        return component.props\n      }\n      return {\n        ...component.state,\n        ...component.props\n      }\n    }\n  })\n}\n\nfunction isFunction (o): o is Function {\n  return typeof o === 'function'\n}\n\nexport default function withWeapp (weappConf: WxOptions) {\n\n  return (ConnectComponent: ComponentClass) => {\n    class BaseComponent<P = {}, S = {}> extends ConnectComponent {\n      private _observeProps: ObserverProperties[] = []\n\n      // mixins 可以多次调用生命周期\n      private willMounts: Function[] = []\n\n      private didMounts: Function[] = []\n\n      private didHides: Function[] = []\n\n      private didShows: Function[] = []\n\n      private willUnmounts: Function[] = []\n\n      public observers?: Record<string, Function>\n\n      constructor (props) {\n        super(props)\n        this.init(weappConf)\n        defineGetter(this, 'data', 'state')\n        defineGetter(this, 'properties', 'props')\n      }\n\n      private initProps (props: Object) {\n        for (const propKey in props) {\n          if (props.hasOwnProperty(propKey)) {\n            const propValue = props[propKey]\n            if (!isFunction(propValue)) {\n              if (propValue.observer) {\n                this._observeProps.push({\n                  name: propKey,\n                  observer: propValue.observer\n                })\n              }\n            }\n            proxy(this, 'props', propKey)\n          }\n        }\n      }\n\n      private init (options: WxOptions) {\n        for (const confKey in options) {\n          const confValue = options[confKey]\n          switch (confKey) {\n            case 'externalClasses':\n              break\n            case 'data':\n              this.state = confValue\n              const keys = Object.keys(this.state)\n              let i = keys.length\n              while (i--) {\n                const key = keys[i]\n                proxy(this, `state`, key)\n              }\n              break\n            case 'properties':\n              this.initProps(confValue)\n              break\n            case 'methods':\n              for (const key in confValue) {\n                const method = confValue[key]\n                this[key] = bind(method, this)\n              }\n              break\n            case 'behaviors':\n              // this.initMixins(confValue, options);\n              break\n            case 'lifetimes':\n              for (const key in confValue) {\n                const lifecycle = confValue[key]\n                this.initLifeCycles(key, lifecycle)\n              }\n              break\n            default:\n              if (lifecycles.has(confKey)) {\n                const lifecycle = options[confKey]\n                this.initLifeCycles(confKey, lifecycle)\n              } else if (isFunction(confValue)) {\n                this[confKey] = bind(confValue, this)\n              } else {\n                this[confKey] = confValue\n              }\n              break\n          }\n        }\n      }\n\n      private initLifeCycles (lifecycleName: string, lifecycle: Function) {\n        for (const lifecycleKey in lifecycleMap) {\n          const cycleNames = lifecycleMap[lifecycleKey]\n          if (cycleNames.indexOf(lifecycleName) !== -1) {\n            switch (lifecycleKey) {\n              case TaroLifeCycles.DidHide:\n                this.didHides.push(lifecycle)\n                break\n              case TaroLifeCycles.DidMount:\n                this.didMounts.push(lifecycle)\n                break\n              case TaroLifeCycles.DidShow:\n                this.didShows.push(lifecycle)\n                break\n              case TaroLifeCycles.WillMount:\n                this.willMounts.push(lifecycle)\n                break\n              case TaroLifeCycles.WillUnmount:\n                this.willUnmounts.push(lifecycle)\n                break\n              default:\n                break\n            }\n          }\n        }\n\n        // mixins 不会覆盖已经设置的生命周期，加入到 this 是为了形如 this.created() 的调用\n        if (!isFunction(this[lifecycleName])) {\n          this[lifecycleName] = lifecycle\n        }\n      }\n\n      private safeExecute = (func?: Function, ...args: unknown[]) => {\n        if (isFunction(func)) func.apply(this, args)\n      }\n\n      private executeLifeCycles (funcs: Function[], ...args: unknown[]) {\n        for (let i = 0; i < funcs.length; i++) {\n          const func = funcs[i]\n          this.safeExecute(func, ...args)\n        }\n      }\n\n      public selectComponent = (...args: unknown[]) => {\n        if (this.$scope && this.$scope.selectComponent) {\n          this.$scope.selectComponent(...args)\n        } else {\n          // tslint:disable-next-line: no-console\n          console.error(`this.$scope 下没有 selectComponent 方法`)\n        }\n      }\n\n      public getRelationNodes = (...args: unknown[]) => {\n        if (this.$scope && this.$scope.getRelationNodes) {\n          this.$scope.getRelationNodes(...args)\n        } else {\n          // tslint:disable-next-line: no-console\n          console.error(`this.$scope 下没有 getRelationNodes 方法`)\n        }\n      }\n\n      setData = (obj: S, callback?: () => void) => {\n        let oldState\n        if (this.observers && Object.keys(Object.keys(this.observers))) {\n          oldState = clone(this.state)\n        }\n        Object.keys(obj).forEach(key => {\n          safeSet(this.state, key, obj[key])\n        })\n        setIsUsingDiff(false)\n        this.setState(this.state, () => {\n          setIsUsingDiff(true)\n          this.triggerObservers(this.state, oldState)\n          if (callback) {\n            callback.call(this)\n          }\n        })\n      }\n\n      private triggerObservers (current, prev) {\n        const observers = this.observers\n        if (observers == null) {\n          return\n        }\n\n        if (Object.keys(observers).length === 0) {\n          return\n        }\n\n        const result = diff(current, prev)\n        const resultKeys = Object.keys(result)\n        if (resultKeys.length === 0) {\n          return\n        }\n\n        for (const observerKey in observers) {\n          const keys = observerKey.split(',').map(k => k.trim())\n          const args: any = []\n          for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            for (let j = 0; j < resultKeys.length; j++) {\n              const resultKey = resultKeys[j]\n              if (\n                resultKey.startsWith(key) ||\n                (key.startsWith(resultKey) && key.endsWith(']'))\n              ) {\n                args.push(safeGet(current, key))\n              }\n            }\n          }\n          if (args.length) {\n            observers[observerKey].apply(this, args)\n          }\n        }\n      }\n\n      public triggerEvent = (eventName: string, ...args: unknown[]) => {\n        const func = this.props[`on${eventName[0].slice(0, 1).toUpperCase()}${eventName.slice(1)}`]\n        if (isFunction(func)) {\n          func.apply(this, args.map(a => ({ detail: a })))\n        }\n      }\n\n      public componentWillMount () {\n        this._observeProps.forEach(({ name: key, observer }) => {\n          const prop = this.props[key]\n          if (typeof observer === 'string') {\n            const ob = this[observer]\n            if (isFunction(ob)) {\n              ob.call(this, prop, prop, key)\n            }\n          } else if (isFunction(observer)) {\n            observer.call(this, prop, prop, key)\n          }\n        })\n        this.safeExecute(super.componentWillMount)\n        this.executeLifeCycles(this.willMounts, this.$router.params || {})\n      }\n\n      public componentDidMount () {\n        this.safeExecute(super.componentDidMount)\n        this.executeLifeCycles(this.didMounts)\n      }\n\n      public componentWillUnmount () {\n        this.safeExecute(super.componentWillUnmount)\n        this.executeLifeCycles(this.willUnmounts)\n      }\n\n      public componentDidHide () {\n        this.safeExecute(super.componentDidHide)\n        this.executeLifeCycles(this.didHides)\n      }\n\n      public componentDidShow () {\n        this.safeExecute(super.componentDidShow)\n        this.executeLifeCycles(this.didShows, this.$router.params || {})\n      }\n\n      public componentWillReceiveProps (nextProps: P) {\n        this.triggerObservers(nextProps, this.props)\n        this._observeProps.forEach(({ name: key, observer }) => {\n          const prop = this.props[key]\n          const nextProp = nextProps[key]\n          // 小程序是深比较不同之后才 trigger observer\n          if (!isEqual(prop, nextProp)) {\n            if (typeof observer === 'string') {\n              const ob = this[observer]\n              if (isFunction(ob)) {\n                ob.call(this, nextProp, prop, key)\n              }\n            } else if (isFunction(observer)) {\n              observer.call(this, nextProp, prop, key)\n            }\n          }\n        })\n        this.safeExecute(super.componentWillReceiveProps)\n      }\n    }\n\n    const props = weappConf['properties']\n\n    if (props) {\n      for (const propKey in props) {\n        const propValue = props[propKey]\n        if (propValue != null && !isFunction(propValue)) {\n          if (propValue.value !== undefined) { // 如果是 null 也赋值到 defaultProps\n            BaseComponent.defaultProps = {\n              [propKey]: propValue.value,\n              ...BaseComponent.defaultProps\n            }\n          }\n        }\n      }\n    }\n\n    const staticOptions = ['externalClasses', 'relations', 'options']\n\n    staticOptions.forEach(option => {\n      const value = weappConf[option]\n      if (value != null) {\n        BaseComponent[option] = value\n      }\n    })\n\n    return BaseComponent\n  }\n}\n"],"names":["const","let","out","i","key","super","this","safeSet","lifecycle","safeGet"],"mappings":"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"}